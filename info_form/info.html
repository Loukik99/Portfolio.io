<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio Info Form</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.08), transparent 35%),
        radial-gradient(circle at 80% 10%, rgba(94, 234, 212, 0.08), transparent 25%),
        #0b1021;
      color: #e8ecf5;
    }
    .page {
      min-height: 100vh;
      padding: 120px 24px 60px;
    }
    .card {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 28px;
      box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(10px);
    }
    h1 {
      margin-bottom: 4px;
      font-size: 28px;
      color: #f8fafc;
    }
    .subtitle {
      color: #4678d0;
      margin-bottom: 18px;
      font-size: 14px;
    }
    .section-title {
      margin: 18px 0 10px;
      color: #7dd3fc;
      font-size: 16px;
      letter-spacing: 0.2px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      color: #295bb7;
      font-size: 14px;
      font-weight: 700;
    }
    input, textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.06);
      color: #1e1f20;
      font-size: 14px;
    }
    input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.35);
    }
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: 12px;
    }
    @media (max-width: 720px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }
    .pill {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.08);
      color: #e8ecf5;
      font-size: 12px;
      margin-top: 6px;
    }
    button {
      margin-top: 6px;
      padding: 12px 18px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #38bdf8, #60a5fa);
      color: #0b1021;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 12px 40px rgba(56, 189, 248, 0.3);
      transition: transform 0.15s ease, box-shadow 0.25s ease;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 48px rgba(56, 189, 248, 0.38);
    }
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 100;
      padding: 14px 28px;
      backdrop-filter: blur(16px);
      background: linear-gradient(135deg, rgba(14, 22, 33, 0.9), rgba(14, 22, 33, 0.75));
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    .tabs {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin: 16px 0 8px;
    }
    .tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }
    .tab-label {
      font-size: 14px;
      color: #94a0b4;
      font-weight: 600;
      cursor: pointer;
    }
    .tab.active .tab-label {
      color: #7dd3fc;
    }
    .tab-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.16);
    }
    .tab.active .tab-bar {
      background: #7dd3fc;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    .section {
      margin: 11px 0;

    }
    #address-section {
      margin-top: 24px;
      margin-right: auto;
    }
    .section h3 {
      color: #f8fafc;
      font-size: 16px;
      margin-bottom: 8px;
    }
    .two-col {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: 12px;
    }
    @media (max-width: 720px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }
    .address-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: 12px;
    }
    .address-grid .full {
      grid-column: 1 / -1;
    }
    .project-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(260px, 1fr));
      gap: 12px;
      margin-bottom: 12px;
    }
    .project-row .full {
      grid-column: 1 / -1;
    }
    @media (max-width: 720px) {
      .project-row {
        grid-template-columns: 1fr;
      }
    }
    .wizard-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 18px;
      position: relative;
    }
    .wizard-controls .next-btn {
      border-radius: 999px;
      padding: 12px 24px;
    }
    .wizard-controls .back-btn {
      border-radius: 999px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.08);
      color: #f8fafc;
      border: 1px solid rgba(255, 255, 255, 0.14);
      cursor: pointer;
      transition: opacity 0.2s ease;
    }
    .wizard-controls .back-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .step-indicator {
      position: absolute;
      right: 0;
      bottom: -6px;
      color: #94a0b4;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <nav>
    <label class="logo">Portfolio<span>.io</span></label>
  </nav>
  <div class="page">
    <div class="card">
      <h1>Build Your Portfolio</h1>
      <p class="subtitle">Add your details once, reuse across templates.</p>
      <div class="tabs">
        <div class="tab active" data-step="0">
          <div class="tab-bar"></div>
          <div class="tab-label">Name & Address</div>
        </div>
        <div class="tab" data-step="1">
          <div class="tab-bar"></div>
          <div class="tab-label">Skills & Education</div>
        </div>
        <div class="tab" data-step="2">
          <div class="tab-bar"></div>
          <div class="tab-label">Projects & Experience</div>
        </div>
      </div>
      <form id="portfolio-form">
        <section class="step active">
          <div class="section">
            <h3>Name</h3>
            <div class="two-col">
              <div>
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" placeholder="First Name" required>
              </div>
              <div>
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" placeholder="Last Name" required>
              </div>
            </div>
          </div>
          <div class="section">
            <h3>Phone</h3>
            <input type="tel" id="phone" name="phone" placeholder="+91 98765 43210" required>
          </div>
          <div class="section">
            <h3>Email</h3>
            <input type="email" id="email" name="email" placeholder="you@domain.com" required>
          </div>
          <div class="section">
            <h3>Address</h3>
            <div class="address-grid">
              <input class="full" type="text" id="street" placeholder="Street Address">
              <input class="full" type="text" id="address2" placeholder="Address Line 2">
              <input type="text" id="city" placeholder="City">
              <input type="text" id="state" placeholder="State/Region/Province">
              <input type="text" id="zip" placeholder="Postal / Zip Code">
              <input type="text" id="country" placeholder="Country">
            </div>
          </div>
        </section>
        <section class="step">
          <div class="section-title">Skills</div>
          <div class="grid-2">
            <input type="text" id="skill1" name="skill1" placeholder="e.g., React">
            <input type="text" id="skill2" name="skill2" placeholder="e.g., TypeScript">
            <input type="text" id="skill3" name="skill3" placeholder="e.g., Node.js">
            <input type="text" id="skill4" name="skill4" placeholder="e.g., MongoDB">
            <input type="text" id="skill5" name="skill5" placeholder="e.g., Tailwind">
            <input type="text" id="skill6" name="skill6" placeholder="e.g., AWS">
          </div>
          <div class="section">
            <label for="roles">Roles (comma-separated)</label>
            <textarea id="roles" name="roles" placeholder="Frontend Developer, UI Engineer"></textarea>
            <span class="pill">Tip: comma-separate multiple roles</span>
          </div>
          <div class="section-title">About</div>
          <div>
            <label for="bio">About me</label>
            <textarea id="bio" name="bio" placeholder="Write a short bio about yourself"></textarea>
          </div>
          <div class="section-title">Education</div>
          <div>
            <label for="education">Education</label>
            <textarea id="education" name="education" placeholder="B.Tech in Computer Science, 2023"></textarea>
          </div>
        </section>
        <section class="step">
          <div class="section-title">Projects</div>
          <div class="project-row">
            <div class="full">
              <label for="projects">Project 1</label>
              <textarea id="projects" name="projects" placeholder="Portfolio Builder Website"></textarea>
            </div>
          </div>
          <div class="project-row">
            <div class="full">
              <label for="pdetails1">Project 1: Details</label>
              <textarea id="pdetails1" name="project-detail" placeholder="Stack, impact, links"></textarea>
            </div>
          </div>
          <div class="project-row">
            <div class="full">
              <label for="projects2">Project 2</label>
              <textarea id="projects2" name="projects" placeholder="Vehicle Management System"></textarea>
            </div>
          </div>
          <div class="project-row">
            <div class="full">
              <label for="pdetails2">Project 2: Details</label>
              <textarea id="pdetails2" name="project-detail" placeholder="Stack, impact, links"></textarea>
            </div>
          </div>
          <div class="project-row">
            <div class="full">
              <label for="projects3">Project 3</label>
              <textarea id="projects3" name="projects" placeholder="Another highlight project"></textarea>
            </div>
          </div>
          <div class="project-row">
            <div class="full">
              <label for="pdetails3">Project 3: Details</label>
              <textarea id="pdetails3" name="project-detail" placeholder="Stack, impact, links"></textarea>
            </div>
          </div>
          <div class="section-title">Experience</div>
          <div>
            <label for="experience">Experience</label>
            <textarea id="experience" name="experience" placeholder="6-week internship in Frontend Development"></textarea>
          </div>
          <div class="section-title">Links</div>
          <div>
            <label for="links">Links</label>
            <textarea id="links" name="links" placeholder="GitHub, LinkedIn, portfolio links"></textarea>
          </div>
        </section>
        <div class="wizard-controls">
          <button type="button" class="back-btn" id="backBtn">Back</button>
          <button type="button" class="next-btn" id="nextBtn">Next</button>
          <div class="step-indicator" id="stepIndicator">1/3</div>
        </div>
      </form>
    </div>
  </div>

  <script>
    const formEl = document.getElementById("portfolio-form");
    const steps = Array.from(document.querySelectorAll(".step"));
    const tabs = Array.from(document.querySelectorAll(".tab"));
    const nextBtn = document.getElementById("nextBtn");
    const backBtn = document.getElementById("backBtn");
    const stepIndicator = document.getElementById("stepIndicator");
    let currentStep = 0;
    function showStep(i) {
      currentStep = i;
      steps.forEach((s, idx) => s.classList.toggle("active", idx === i));
      tabs.forEach((t, idx) => t.classList.toggle("active", idx === i));
      stepIndicator.textContent = (i + 1) + "/" + steps.length;
      nextBtn.textContent = i === steps.length - 1 ? "Save & Choose Template" : "Next";
      backBtn.disabled = i === 0;
    }
    tabs.forEach((t, idx) => {
      t.addEventListener("click", () => showStep(idx));
    });
    nextBtn.addEventListener("click", () => {
      if (currentStep < steps.length - 1) {
        showStep(currentStep + 1);
      } else {
        formEl.requestSubmit();
      }
    });
    backBtn.addEventListener("click", () => {
      if (currentStep > 0) showStep(currentStep - 1);
    });
    showStep(0);
    formEl.addEventListener("submit", async function (e) {
      e.preventDefault(); // Prevent form submission

      // Collect data from the form
      const firstName = document.getElementById("firstName").value;
      const lastName = document.getElementById("lastName").value;
      const name = `${firstName} ${lastName}`.trim();
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const roles = document.getElementById("roles").value.split(",").map(role => role.trim());
      const skill1 = document.getElementById("skill1").value.trim();
      const skill2 = document.getElementById("skill2").value.trim();
      const skill3 = document.getElementById("skill3").value.trim();
      const skill4 = document.getElementById("skill4").value.trim();
      const skill5 = document.getElementById("skill5").value.trim();
      const skill6 = document.getElementById("skill6").value.trim();
      const bio = document.getElementById("bio").value;
      const education = document.getElementById("education").value;
      const project1 = document.getElementById("projects").value;
      const project_details1 = document.getElementById("pdetails1").value;

      const project2 = document.getElementById("projects2").value;
      const project_details2 = document.getElementById("pdetails2").value;

      const project3 = document.getElementById("projects3").value;
      const project_details3 = document.getElementById("pdetails3").value;

      const experience = document.getElementById("experience").value;
      const links = document.getElementById("links").value;

      // Prepare the form data as an object
      const formData = {
        name, email, phone, roles, skill1, skill2, skill3, skill4, skill5, skill6,
        skills: [skill1, skill2, skill3, skill4, skill5, skill6].filter(Boolean),
        bio, education, project1, project_details1, project2, project_details2,
        project3, project_details3, experience, links,
        projects: [
          ...(project1 ? [{ name: project1, details: project_details1 }] : []),
          ...(project2 ? [{ name: project2, details: project_details2 }] : []),
          ...(project3 ? [{ name: project3, details: project_details3 }] : []),
        ]
      };

      // Send the data to the backend API
      try {
        const response = await fetch('http://localhost:5001/api/portfolio', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify(formData),
        });

        const result = await response.json();
        if (response.ok) {
          alert('Portfolio saved successfully!');
          // Redirect to another page if needed
          window.location.href = "templates_selection.html";
        } else {
          alert(`Error: ${result.message}`);
        }
      } catch (error) {
        console.error('Error submitting form:', error);
        alert('Failed to save portfolio. Please try again.');
      }
    });
  </script>
</body>
</html>
